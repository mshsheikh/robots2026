/sp.phase-a-finalize-and-push 
Project: robots2026 — Phase A finalization + deploy
Owner: Salman

Description:
Clean Git history, reapply Phase A chat routing fixes correctly on main,
validate GitHub Pages readiness, create a final PHR, and deploy.
Execution pauses ONLY for GitHub PAT creation, then resumes push.

Primary goals:
 - Reset accidental commits on main
 - Reapply Phase A fixes cleanly
 - Ensure /docs/chat is routable on GitHub Pages
 - Ensure sidebar visibility and static asset correctness
 - Commit with minimal diff
 - Create final Phase A PHR
 - Push to GitHub after explicit auth confirmation

Rules (STRICT):
  1. Run ONLY from repository root.
  2. Always PRINT commands before execution.
  3. Do NOT introduce new tooling, infra, or hosting.
  4. Phase A scope only (docs, static UI, config).
  5. Abort if diff exceeds expected files.
  6. Respect GitHub authentication boundary.
  7. End in judge-ready state.

---

STEP 0 — Validate environment
Print and run:
  pwd
  ls -la

Abort if book/ or history/ missing.

---

STEP 1 — Sync local main with GitHub (CRITICAL)
Print and run:
  git fetch origin
  git reset --hard origin/main

Verify:
  git --no-pager log --oneline --decorate -3

Abort if HEAD ≠ origin/main.

---

STEP 2 — Reapply Phase A fixes (deterministic)

Modify: book/docs/chat.md  
Ensure EXACT frontmatter at top:

---
id: chat
title: AI Chat Assistant
---

Do NOT change body content except judge notes.

Verify iframe src:
  /robots2026/chat/index.html

---

STEP 3 — Verify sidebar linkage

Inspect: book/sidebars.js

Ensure sidebar contains:
  'chat'

Under a visible category (e.g., Tools & Resources).

No autogenerated reintroduction.

---

STEP 4 — Static sanity check

Inspect: book/static/chat/index.html

Confirm:
 - Pure HTML
 - No JSX
 - No localhost hard dependency beyond backend note

---

STEP 5 — Commit discipline (GUARDED)

Print:
  git status

Abort if files modified ≠:
 - book/docs/chat.md
 - book/sidebars.js

Then run:
  git add book/docs/chat.md book/sidebars.js
  git commit -m "phase-a: finalize chat routing and GitHub Pages visibility"

Abort if commit touches unexpected files.

---

STEP 6 — Create Phase A final PHR

Create:
history/prompts/001-docusaurus-robotics/006-phase-a-finalize-pages.phr.md

With content:

---
id: 006
title: phase-a-finalize-pages
stage: phase-a
date: YYYY-MM-DD
model: claude-sonnet
feature: chat-ui
branch: main
user: Salman
command: sp.phase-a-finalize-and-push
summary: Finalized Phase A by cleaning Git history, fixing chat routing,
ensuring sidebar visibility, and syncing localhost behavior with GitHub Pages.
files_modified:
  - book/docs/chat.md
  - book/sidebars.js
status: completed
demo_ready: true
---

---

STEP 7 — AUTH PAUSE (MANDATORY HUMAN STEP)

⛔ STOP EXECUTION HERE ⛔

Human action required:

1. Create GitHub Personal Access Token
   - Repo: robots2026
   - Contents: Read & Write
   - Pages: Read & Write
   - Actions: Read & Write

2. Confirm token is ready.

Claude MUST wait for explicit confirmation:
  "PAT_READY"

---

STEP 8 — Push to GitHub (RESUME AFTER CONFIRMATION)

After user types: PAT_READY

Print and run:
  git push https://<username>@github.com/mshsheikh/robots2026.git main

Prompt:
 - Username: mshsheikh
 - Password: <PASTE TOKEN>

---

STEP 9 — Deployment confirmation

Explain:
 - GitHub Actions will run
 - Pages redeploy in 2–5 minutes
 - /docs/chat should be reachable

---

STEP 10 — Final output

One-line summary:
"Phase A finalized and deployed: Chat page is live, routable, and judge-ready."

JSON report:
{
  "phase": "A",
  "git_clean": true,
  "chat_route": "/docs/chat",
  "sidebar_visible": true,
  "github_pages_deployed": true,
  "judge_ready": true,
  "phrs_created": [
    "history/prompts/001-docusaurus-robotics/006-phase-a-finalize-pages.phr.md"
  ]
}

End of spec.
